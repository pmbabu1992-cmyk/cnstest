<div class="container-fluid">
  <!-- Page Header -->
  <div class="row mb-4">
    <div class="col-12 d-flex justify-content-end gap-2">
    <!-- <div class="d-flex gap-3"> -->
  <button class="btn btn-outline-primary">
        <i class="fa fa-sync-alt"></i>
        Refresh All
      </button>
  <button class="btn btn-primary">
        <i class="fa fa-plus"></i>
        Add Device
      </button>
    <!-- </div> -->
  </div>

  <!-- Quick Stats -->
  <div class="row mb-4">
    <div class="col-md-3">
      <div class="card">
  <div class="card-body d-flex justify-content-between align-items-center p-4">
          <div>
            <p class="small text-muted">Total Devices</p>
            <p class="h4 fw-bold text-primary mb-0">{{ devices.length }}</p>
          </div>
          <i class="fa fa-thermometer-half h2 text-primary"></i>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card">
  <div class="card-body d-flex justify-content-between align-items-center p-4">
          <div>
            <p class="small text-muted">Online</p>
            <p class="h4 fw-bold text-success mb-0">{{ onlineCount }}</p>
          </div>
          <i class="fa fa-check-circle h2 text-success"></i>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card">
  <div class="card-body d-flex justify-content-between align-items-center p-4">
          <div>
            <p class="small text-muted">Warnings</p>
            <p class="h4 fw-bold text-warning mb-0">{{ warningCount }}</p>
          </div>
          <i class="fa fa-exclamation-triangle h2 text-warning"></i>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card">
  <div class="card-body d-flex justify-content-between align-items-center p-4">
          <div>
            <p class="small text-muted">Avg Battery</p>
            <p class="h4 fw-bold text-foreground mb-0">{{ avgBattery }}%</p>
          </div>
          <i class="fa fa-battery-full h2 text-secondary"></i>
        </div>
      </div>
    </div>
  </div>

  <!-- Search and Filters -->
  <div class="row">
    <div class="col-md-12">
        <div class="hstack gap-2 justify-content-end">
            <div class="position-relative">
            <i class="fa fa-search position-absolute" style="left: 12px; top: 12px; color: #90a4ae;"></i>
            <input type="text" class="form-control ps-5 bg-surface" placeholder="Search devices..." />
        </div>
        <button class="btn btn-outline-primary">
            <i class="fa fa-filter me-2"></i>
            Filter
        </button>
        </div>
    </div>
  </div>
  </div>

  <!-- Devices Grid -->
  <div class="row">
    <!-- <ng-container *ngFor="let device of devices"> -->
      <div class="col-lg-6 col-md-12 mb-4 d-flex" *ngFor="let device of devices">
        <div class="card flex-grow-1 h-100">
          <div class="card-header bg-white">
            <div class="d-flex justify-content-between align-items-start">
              <div class="d-flex align-items-start gap-4">
                <div class="p-3 rounded bg-primary bg-opacity-10 border border-primary border-opacity-20">
                  <i class="fa fa-thermometer-half h4 text-primary"></i>
                </div>
                <div>
                  <div class="d-flex align-items-center gap-2 mb-1">
                    <span class="h5 mb-0">{{ device.name }}</span>
                    <i [ngClass]="{
                      'fa fa-check-circle text-success': device.status === 'online',
                      'fa fa-exclamation-triangle text-warning': device.status === 'warning',
                      'fa fa-wifi text-danger': device.status === 'offline'
                    }"></i>
                  </div>
                  <p class="small text-muted mb-2">
                    {{ device.id }} • {{ device.type }}
                  </p>
                  <div class="d-flex align-items-center gap-4 text-xs text-muted">
                    <span>Firmware: {{ device.firmware }}</span>
                    <span>•</span>
                    <span>Last update: {{ device.lastUpdate }}</span>
                  </div>
                </div>
              </div>
              <div class="d-flex align-items-center gap-2">
                <span [ngClass]="{
                  'bg-success bg-opacity-10 text-success border border-success border-opacity-20': device.status === 'online',
                  'bg-warning bg-opacity-10 text-warning border border-warning border-opacity-20': device.status === 'warning',
                  'bg-danger bg-opacity-10 text-danger border border-danger border-opacity-20': device.status === 'offline'
                }" class="badge px-3 py-2">
                  {{ device.status.toUpperCase() }}
                </span>
                <button class="btn btn-light btn-sm"><i class="fa fa-ellipsis-v"></i></button>
              </div>
            </div>
          </div>
            <div class="card-body">
            <!-- Tabs -->
            <ul class="nav nav-tabs mb-3" role="tablist">
              <li class="nav-item" role="presentation">
                <button class="nav-link active" data-bs-toggle="tab" attr.data-bs-target="#overview-{{device.id}}" type="button" role="tab">Overview</button>
              </li>
              <li class="nav-item" role="presentation">
                <button class="nav-link" data-bs-toggle="tab" attr.data-bs-target="#config-{{device.id}}" type="button" role="tab">Config</button>
              </li>
              <li class="nav-item" role="presentation">
                <button class="nav-link" data-bs-toggle="tab" attr.data-bs-target="#logs-{{device.id}}" type="button" role="tab">Logs</button>
              </li>
            </ul>
            <div class="tab-content">
              <div class="tab-pane fade show active" id="overview-{{device.id}}" role="tabpanel">
                <div class="row g-3">
                  <div class="col-12 col-sm-6 col-md-3">
                    <div class="d-flex flex-column align-items-center p-4 rounded bg-white border border-primary h-100 w-100">
                      <div class="display-6 fw-bold text-primary mb-1">{{ device.temperature }}°C</div>
                      <p class="small fw-bold text-dark mt-2">Current Temp</p>
                    </div>
                  </div>
                  <div class="col-12 col-sm-6 col-md-3">
                    <div class="mb-2 h-100">
                      <div class="d-flex align-items-center justify-content-between">
                        <div class="d-flex align-items-center gap-2">
                          <i class="fa fa-battery-full" [ngClass]="getBatteryColor(device.battery)"></i>
                          <span class="small fw-medium">Battery</span>
                        </div>
                        <span class="small fw-bold" [ngClass]="getBatteryColor(device.battery)">{{ device.battery }}%</span>
                      </div>
                      <div class="progress h-2">
                        <div class="progress-bar" [style.width]="device.battery + '%'" [ngClass]="getBatteryColor(device.battery)"></div>
                      </div>
                    </div>
                  </div>
                  <div class="col-12 col-sm-6 col-md-3">
                    <div class="mb-2 h-100">
                      <div class="d-flex align-items-center justify-content-between">
                        <div class="d-flex align-items-center gap-2">
                          <i class="fa fa-wifi text-primary"></i>
                          <span class="small fw-medium">Signal</span>
                        </div>
                        <span class="small fw-medium">{{ device.signal }}</span>
                      </div>
                      <div class="progress h-2">
                        <div class="progress-bar bg-primary" [style.width]="device.signalStrength + '%'" ></div>
                      </div>
                    </div>
                  </div>
                  <div class="col-12 col-sm-6 col-md-3">
                    <div class="d-flex align-items-center justify-content-between h-100">
                      <div>
                        <p class="small fw-medium mb-0">Device Status</p>
                        <p class="small text-muted mb-0">Enable/Disable</p>
                      </div>
                      <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" [(ngModel)]="device.enabled">
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="tab-pane fade" id="config-{{device.id}}" role="tabpanel">
                <div class="row mb-3">
                  <div class="col-md-6 mb-2">
                    <label class="form-label">Sampling Rate (seconds)</label>
                    <input type="number" class="form-control bg-surface" value="30" />
                  </div>
                  <div class="col-md-6 mb-2">
                    <label class="form-label">Alert Threshold (°C)</label>
                    <input type="number" class="form-control bg-surface" value="25" />
                  </div>
                </div>
                <div class="d-flex gap-2 mt-2">
                  <button class="btn btn-primary btn-control">Save Config</button>
                  <button class="btn btn-outline-primary btn-dashboard">Reset</button>
                </div>
              </div>
              <div class="tab-pane fade" id="logs-{{device.id}}" role="tabpanel">
                <div class="space-y-2 text-sm max-h-32 overflow-y-auto">
                  <div class="d-flex justify-content-between p-2 rounded bg-surface">
                    <span>Temperature reading: {{ device.temperature }}°C</span>
                    <span class="text-muted">{{ device.lastUpdate }}</span>
                  </div>
                  <div class="d-flex justify-content-between p-2 rounded bg-surface">
                    <span>Battery status: {{ device.battery }}%</span>
                    <span class="text-muted">5 min ago</span>
                  </div>
                  <div class="d-flex justify-content-between p-2 rounded bg-surface">
                    <span>Connection established</span>
                    <span class="text-muted">1 hour ago</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="d-flex justify-content-end gap-2 mt-4 pt-4 border-top">
              <button class="btn btn-outline-primary btn-dashboard">
                <i class="fa fa-power-off"></i>
                Restart
              </button>
              <button class="btn btn-outline-primary btn-dashboard">Test Connection</button>
              <button class="btn btn-primary btn-control">Configure</button>
            </div>
          </div>
        </div>
      </div>
    <!-- </ng-container> -->
  </div>
</div>
